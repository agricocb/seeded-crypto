<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>DiceKeys Seeded Cryptography Library: Key-Derivation Options JSON format</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">DiceKeys Seeded Cryptography Library
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('key_derivation_options_format.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Key-Derivation Options JSON format </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This JSON-format for an object specifies how seeds and keys should be derived. Its value must be either a valid JSON object specification, enclosed in braces ("{}"), or an empty string.</p>
<p>All fields are optional and have defaults specified, and so an empty object "{}" will indicate that he defaults for all fields should be used. Any empty string ("") is treated the same as an empty object ("{}).</p>
<h1><a class="anchor" id="autotoc_md0"></a>
Fields Specified by this library</h1>
<p>The following fields are used by the seeded-crypto C++ library.</p>
<h3><a class="anchor" id="autotoc_md1"></a>
keyType</h3>
<p>Specify whether this JSON object should be used to construct an <a class="el" href="class_seed.html">Seed</a>, <a class="el" href="class_symmetric_key.html">SymmetricKey</a>, <a class="el" href="class_private_key.html">PrivateKey</a>, or <a class="el" href="class_signing_key.html">SigningKey</a>.</p>
<div class="fragment"><div class="line">&quot;keyType&quot;?:</div>
<div class="line">    // For constructing a Seed object</div>
<div class="line">    &quot;Seed&quot; |</div>
<div class="line">    // For constructing a SymmetricKey object</div>
<div class="line">    &quot;Symmetric&quot; |</div>
<div class="line">    // For constructing a PrivateKey object, from which a corresponding PublicKey can be instantiated</div>
<div class="line">    &quot;Public&quot; |</div>
<div class="line">    // For constructing a SigningKey object, from which a SignatureVerificationKey can be instantiated</div>
<div class="line">    &quot;Signing&quot;</div>
</div><!-- fragment --><p>If not provided, the keyType is inferred from the type of object being constructed.</p>
<p>If you attempt to construct an object of one <code>keyType</code> when the the <code>"keyType"</code> field specifies a different <code>keyType</code>, the constructor will treat it as an exception.</p>
<h3><a class="anchor" id="autotoc_md2"></a>
algorithm</h3>
<p>Specify the specific algorithm to use.</p>
<div class="fragment"><div class="line">&quot;algorithm&quot;?: </div>
<div class="line">    // valid only for &quot;keyType&quot;: &quot;Symmetric&quot;</div>
<div class="line">    &quot;XSalsa20Poly1305&quot; | // the current default for SymmetricKey</div>
<div class="line">    // valid only for &quot;keyType&quot;: &quot;Public&quot;</div>
<div class="line">    &quot;X25519&quot; |           // the current default for PrivateKey</div>
<div class="line">    // valid only for &quot;keyType&quot;: Signing</div>
<div class="line">    &quot;Ed25519&quot;            // the current default for SigningKey</div>
</div><!-- fragment --><p>The <code>algorithm</code> field should never be set for <code>"keyType": "Seed"</code>.</p>
<h3><a class="anchor" id="autotoc_md3"></a>
keyLengthInBytes</h3>
<div class="fragment"><div class="line">&quot;keyLengthInBytes&quot;?: number // e.g. &quot;keyLengthInBytes&quot;: 32</div>
</div><!-- fragment --><p>Set this value when using <code>"KeyType": "Seed"</code> to set the size of the seed to be derived (in bytes, as the name implies). If set for other <code>keyType</code>s, it must match the keyLengthInBytes of that algorithm (32 bytes for the current algorithms).</p>
<p>If this library is extended to support <code>algorithm</code> values with multiple key-length options, this field can be used to specify which length varient of the algorithm to use.</p>
<h3><a class="anchor" id="autotoc_md4"></a>
hashFunction</h3>
<div class="fragment"><div class="line">&quot;hashFunction&quot;?: &quot;BLAKE2b&quot; | &quot;SHA256&quot; | &quot;Argon2id&quot; | &quot;Scrypt&quot; // default &quot;SHA256&quot;</div>
</div><!-- fragment --><p>Specifies the hash function used to derive the key. If <code>"Argoin2id"</code> or <code>"Scrypt"</code> are used, you can specify the memory limit and ops (iterations) via two additional fields, which are ignored for <code>"BLAKE2b"</code> and <code>"SHA256"</code>. </p><div class="fragment"><div class="line">&quot;hashFunctionMemoryLimit&quot;: number // default 67108864</div>
<div class="line">&quot;hashFunctionIterations&quot;: number // default 2, has no effect if algorithm is &quot;BLAKE2b&quot; | &quot;SHA256&quot; </div>
</div><!-- fragment --><p>For example: </p><div class="fragment"><div class="line">{</div>
<div class="line">    &quot;keyType&quot;: &quot;Seed&quot;,</div>
<div class="line">    &quot;keyLengthInBytes&quot;: 96,</div>
<div class="line">    &quot;hashFunction&quot;: &quot;Argon2id&quot;,</div>
<div class="line">    &quot;hashFunctionMemoryLimit&quot;: 67108864,</div>
<div class="line">    &quot;hashFunctionIterations&quot;: 4</div>
<div class="line">}</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md5"></a>
Hash defaults and recommendations</h4>
<p>The default hash function is <code>SHA256</code> as this library was designed for DiceKeys, which are sufficiently random seeds (~196 bits) so as not to require brute-force prevention with a costly key-derivation function like <code>Scrypt</code> or <code>Argon2id</code>. The default ensures that keys can be re-derived cheaply on just about any hardware platform.</p>
<p>Applcations that need a more expensive key derivation to protect against brute-forcing of the key-derivation algorithm will want to use <code>Scrypt</code> if and only if keys will always be derived on hardware where no untrusted code will run during the derivation process. If keys may sometimes be derived on hardware shared with untrusted code, even if that code is sanboxed, we recommend using <code>Argon2id</code>.</p>
<p>We purposely chose <em>not</em> to support multiple iterations of <code>BLAKE2b</code> or <code>SHA256</code> via the <code>hashFunctionIterations</code> field, as applications that want to increase the cost of key derviation to prevent brute forcing should use <code>Argon2id</code> or <code>Scrypt</code>.</p>
<h1><a class="anchor" id="autotoc_md6"></a>
Extension fields</h1>
<p>In addition to the fields specified by this library, this format can be extended to support additional fields. This library will ignore those fields when processing the JSON format, but since those fields are part of the JSON string, they will be part of the seed used to derive the output. No matter how small the change to the JSON string, whether the insertion of a new field or the insertion of a white-space character, will cause an entirely different key to be derived.</p>
<p>So, for example, an arbitrary salt could be extended when deriving a <a class="el" href="class_symmetric_key.html" title="A SymmetricKey can be used to seal and unseal messages. This SymmetricKey class can be (re) derived f...">SymmetricKey</a> as illustred by this key-derivation options JSON string: </p><div class="fragment"><div class="line">{</div>
<div class="line">    &quot;keyType&quot;: &quot;SymmetricKey&quot;,</div>
<div class="line">    &quot;SaltWithThePhoneNumberForJenny&quot;: 8675309</div>
<div class="line">}</div>
</div><!-- fragment --><p>The following extension field is used by DiceKeys, but not parsed or processed by this specific library.</p>
<h3><a class="anchor" id="autotoc_md7"></a>
restrictions</h3>
<p>The DiceKeys app will restrict access to derived seeds or keys to so that only those apps that are specifically allowed can obtain or use them.</p>
<div class="fragment"><div class="line">&quot;restrictions: {</div>
<div class="line">    &quot;androidPackagePrefixesAllowed&quot;: string[],</div>
<div class="line">    &quot;urlPrefixesAllowed&quot;: string[]</div>
<div class="line">}</div>
</div><!-- fragment --><p>For example: </p><div class="fragment"><div class="line">{</div>
<div class="line">    &quot;keyType&quot;: &quot;Seed&quot;,</div>
<div class="line">    &quot;restrictions&quot;: {</div>
<div class="line">        &quot;androidPackagePrefixesAllowed&quot;: [</div>
<div class="line">            &quot;org.dicekeys.apps.fido&quot;,</div>
<div class="line">            &quot;com.dicekeys.apps.fido&quot;</div>
<div class="line">        ],</div>
<div class="line">        &quot;urlPrefixesAllowed&quot;: [</div>
<div class="line">            &quot;https://dicekeys.org/app/fido&quot;,</div>
<div class="line">            &quot;https://dicekeys.com/app/fido&quot;</div>
<div class="line">        ]</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md8"></a>
excludeOrientationOfFaces</h3>
<p>When using a DiceKey as a seed, the default seed string will be a 75-character string consisting of triples for each die in canonoical order:</p><ul>
<li>The uppercase letter on the die</li>
<li>The digit on the die</li>
<li>The orientation relative to the top of the square in canonical form</li>
</ul>
<p>If <code>excludeOrientationOfFaces</code> is set to <code>true</code> set to true, the orientation character (the third member of each triple) will be excluded resulting in a 50-character seed. The advantage of this settig is that, should a user manually transcribe the contents of a DiceKey, incorrectly record and orientation, and not verify that the copy is correct, the mistake will not prevent them from correctly re-deriving the seed for this key in the future.</p>
<div class="fragment"><div class="line">&quot;excludeOrientationOfFaces&quot;?: true | false // default false</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
